# Hardcoded defaults for Snirect
# This file is used as the base configuration.

set_proxy = true
ca_install = "auto"
ipv6 = true
check_hostname = true
ecs = ""

[DNS]
nameserver = [
    "https://dnschina1.soraharu.com/dns-query",
    "https://77.88.8.8/dns-query",
    "https://dns.google/dns-query"
]
bootstrap_dns = ["tls://223.5.5.5"]

[timeout]
dial = 30
dns = 5

[limit]
max_connections = 0
dns_cache_size = 10000

[log]
loglevel = "INFO"
logfile = ""

[server]
address = "127.0.0.1"
port = 7654
pac_host = "127.0.0.1"

[preference]
# Mode: standard (current), fastest (test both), ipv6 (force v6), ipv4 (force v4)
mode = "standard"

# When mode="fastest", whether to actually test latency or just use first
enable_testing = true

# Timeout for each connection test in milliseconds
test_timeout_ms = 500

# Test IPs in parallel (true) or sequentially (false)
test_parallel = true

# Maximum number of IPs to test per query (to avoid too many goroutines)
max_test_ips = 10

# Preference cache TTL in seconds (0 = use DNS TTL / 2)
cache_ttl = 216000

# Maximum number of entries in preference cache (0 = unlimited)
cache_size = 5000
